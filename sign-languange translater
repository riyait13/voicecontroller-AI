import cv2
import pytesseract

#  Set path to tesseract executable (change this to match your system)
pytesseract.pytesseract.tesseract_cmd = r'C:\Program Files\Tesseract-OCR\tesseract.exe'

def singh_translator(text):
    words = text.split()
    translated_words = [word + " Singh" for word in words]
    return ' '.join(translated_words)

# for  Opening webcamq
cap = cv2.VideoCapture(0)

# Set the resolution of the webcam feed
cap.set(cv2.CAP_PROP_FRAME_WIDTH, 80)
cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 60)

print("Press 'q' to quit.")

while True:
    ret, frame = cap.read()
    if not ret:
        print("Failed to grab frame from webcam.")
        break

    #  Convert frame to gray for better OCR
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

    #  OCR it!
    text = pytesseract.image_to_string(gray, lang='eng')

    print(f"OCR Text: {text}")  # Debug print

    #  Translate to Singh Language
    singh_text = singh_translator(text)

    #  Show on screen
    cv2.putText(frame, singh_text[:100], (10, 30), cv2.FONT_HERSHEY_SIMPLEX, 
                0.6, (0, 255, 0), 2, cv2.LINE_AA)

    cv2.imshow("Singh Translator AI", frame)

    # Save the current frame as an image file
    cv2.imwrite("debug_frame.png", gray)

    # Press 'q' to quit
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()
